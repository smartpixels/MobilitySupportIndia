define(['require', 'app'], function(require, APP) {

    /**
     * Controller for Screen1 generated by Appery.io
     * @module Screen1
     */

    APP.controller('Screen1', ['$scope', 'Apperyio', controller]);

    function controller($scope, Apperyio) {

        /**
         * user controller variables
         */
        $scope.img = Apperyio.EntityAPI('String');
        $scope.lat = Apperyio.EntityAPI('String');
        $scope.lng = Apperyio.EntityAPI('String');
        $scope.geolocation = Apperyio.EntityAPI('marker');

        /**
         * User controller functions
         */
        /**
         * @function init
         */
        $scope.init = function() {
            //On load screen logic
        };

        /**
         * @function launchCam
         */
        $scope.launchCam = function() {
            var requestData = {}; /*|button_mapping|onbeforesend|BB6698E8-C020-51B0-E618-53FDFB0275D4||5308|*/

            // read more about using rest services: https://links.appery.io/ve-snippet-rest
            Apperyio.get("Camera_getPicture")(requestData).then( /*|service_bookmark|bookmark|BB6698E8-C020-51B0-E618-53FDFB0275D4||6101|*/

            function(success) { // success callback
                (function mapping8081(success, $scope) {
                    var img_scope = $scope.img;
                    img_scope = success.image;
                    $scope.img = img_scope; /*|button_mapping|onsuccess|BB6698E8-C020-51B0-E618-53FDFB0275D4||8081|*/
                })(success, $scope);

            }, function(error) { // callback to handle request error
            }, function(notify) { // notify callback, can fire few times
            });

        };

        /**
         * @function showLocation
         */
        $scope.showLocation = function() {
            var requestData = {}; /*|button_mapping|onbeforesend|976EF37C-D5DF-1AE2-8662-937E4C9B3472||2750|*/

            // read more about using rest services: https://links.appery.io/ve-snippet-rest
            Apperyio.get("Geolocation_currentPosition")(requestData).then( /*|service_bookmark|bookmark|976EF37C-D5DF-1AE2-8662-937E4C9B3472||1039|*/

            function(success) { // success callback
                (function mapping2967(success, $scope) {
                    var lat_scope = $scope.lat;
                    var lng_scope = $scope.lng;
                    var geolocation_scope = $scope.geolocation;
                    lat_scope = success.coords.latitude;
                    lng_scope = success.coords.longitude;
                    _.set(geolocation_scope, 'latitude', success.coords.latitude);
                    _.set(geolocation_scope, 'longitude', success.coords.longitude);
                    $scope.lat = lat_scope;
                    $scope.lng = lng_scope;
                    $scope.geolocation = geolocation_scope; /*|button_mapping|onsuccess|976EF37C-D5DF-1AE2-8662-937E4C9B3472||2967|*/
                })(success, $scope);

            }, function(error) { // callback to handle request error
            }, function(notify) { // notify callback, can fire few times
            });

        };

    }

});